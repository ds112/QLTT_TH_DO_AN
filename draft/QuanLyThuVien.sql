USE MASTER
CREATE DATABASE QLTV
USE QLTV

CREATE TABLE THELOAI
(
	MATHELOAI VARCHAR(30) PRIMARY KEY NOT NULL,
	TENTHELOAI VARCHAR(50)
)

CREATE TABLE SACH
(
	MASACH CHAR(10) PRIMARY KEY NOT NULL,
	TENSACH VARCHAR(50),
	NXB VARCHAR(50),
	MATHELOAI VARCHAR(30) FOREIGN KEY REFERENCES THELOAI(MATHELOAI)
)

CREATE TABLE THANHVIEN
(
	MATHE VARCHAR(15) PRIMARY KEY NOT NULL,
	HOTEN VARCHAR(50),
	DIACHI VARCHAR(50),
	SDT VARCHAR(30)
)

CREATE TABLE MUON_TRA
(
	SOPHIEU INT NOT NULL,
	MATHE VARCHAR(15) FOREIGN KEY REFERENCES THANHVIEN(MATHE),
	MASACH CHAR(10) FOREIGN KEY REFERENCES SACH(MASACH),
	TRANGTHAI CHAR(20),
	NGAY_MUON_TRA SMALLDATETIME
	CONSTRAINT PK_MUON_TRA PRIMARY KEY (SOPHIEU,MATHE,MASACH)
)

SET  DATEFORMAT YMD

--INSERT DATA
--TABLE THELOAI
INSERT INTO THELOAI(MATHELOAI,TENTHELOAI) 
VALUES ('MTL001','VAN HOC')
INSERT INTO THELOAI(MATHELOAI,TENTHELOAI) 
VALUES ('MTL002','KHOA HOC')
INSERT INTO THELOAI(MATHELOAI,TENTHELOAI) 
VALUES ('MTL003','THIEU NHI')
INSERT INTO THELOAI(MATHELOAI,TENTHELOAI) 
VALUES ('MTL004','TIEU THUYET')
INSERT INTO THELOAI(MATHELOAI,TENTHELOAI) 
VALUES ('MTL005','KINH TE')

--TABLE SACH
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS001','KHONG GIA DINH','TUOI TRE','MTL001')
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS002','LUOC SU THOI GIAN','BANTAN BOOKS','MTL002')
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS003','CON MEO DAY HAI AU BAY','LALALA','MTL003')
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS004','THANH XUAN HACHIMAN','XASEXI','MTL004')
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS005','SACH KT','KATETA','MTL005')
--MORE DATA
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS006','Cuon Sach HAHAHA','XAXIMI','MTL004')
INSERT INTO SACH(MASACH,TENSACH,NXB,MATHELOAI) 
VALUES ('MS007','Boi Theo Dong Nuoc','SUSHI','MTL005')

--TABLE THANHVIEN
INSERT INTO THANHVIEN(MATHE,HOTEN,DIACHI,SDT) 
VALUES ('MT001','HOANG THANH HUYEN','QUAN 9,HCMC','0199847584')
INSERT INTO THANHVIEN(MATHE,HOTEN,DIACHI,SDT) 
VALUES ('MT002','NGUYEN THANH THANH','QUAN 1,HCMC','0976728946')
INSERT INTO THANHVIEN(MATHE,HOTEN,DIACHI,SDT) 
VALUES ('MT003','TONG VAN XANH','QUAN 3,HCMC','0647289734')
INSERT INTO THANHVIEN(MATHE,HOTEN,DIACHI,SDT) 
VALUES ('MT004','LE VAN GANH','QUAN THU DUC,HCMC','0647882362')
INSERT INTO THANHVIEN(MATHE,HOTEN,DIACHI,SDT) 
VALUES ('MT005','DAO DUY HONG','QUAN 11,HCMC','0987656783')

--TABLE MUON_TRA
INSERT INTO MUON_TRA(SOPHIEU,MATHE,MASACH,TRANGTHAI,NGAY_MUON_TRA)
VALUES (001,'MT001','MS001','DANG MUON','2018/11/11')
INSERT INTO MUON_TRA(SOPHIEU,MATHE,MASACH,TRANGTHAI,NGAY_MUON_TRA)
VALUES (002,'MT002','MS002','DANG MUON','2018/11/7')
INSERT INTO MUON_TRA(SOPHIEU,MATHE,MASACH,TRANGTHAI,NGAY_MUON_TRA)
VALUES (003,'MT003','MS003','DANG MUON','2018/11/1')
INSERT INTO MUON_TRA(SOPHIEU,MATHE,MASACH,TRANGTHAI,NGAY_MUON_TRA)
VALUES (004,'MT004','MS004','DANG MUON','2018/11/9')
INSERT INTO MUON_TRA(SOPHIEU,MATHE,MASACH,TRANGTHAI,NGAY_MUON_TRA)
VALUES (005,'MT005','MS005','DANG MUON','2018/1/11')

--EXECUTE TEST DATABASE INSERT
SELECT * FROM THELOAI;
SELECT * FROM SACH;
SELECT * FROM THANHVIEN;
SELECT * FROM MUON_TRA;
--